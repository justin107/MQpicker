<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>mqPicker demo</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <link rel="stylesheet" href="css/index.css">
    <style type="text/css">
        body {text-align: center}
        code {
            word-wrap: break-word;word-break: break-all;color: #2eb6aa;
        }
        body > div{
            width: 500px; margin: 0 auto;
        }

        p > span {cursor: pointer;border: 1px solid #ccc;margin: 0 10px;padding: 3px 10px;}

    </style>
</head>

<body>

<!--<div id="pickerMap" class="aMap-picker-map"></div>-->
<h2>基本配置</h2>
<code>
    new MqPicker({
        some configure
    })
</code>

<h3>普通省市区(单选)</h3>
<div id="demo1"></div>

<div>
    <code>
        lastIsMultiple:false,
    </code>
</div>

<p class="demo1">
    <span class="button">点击清除</span>
    <span class="edit">点击回写</span>
    <span class="console">console</span>
</p>

<h3>普通省市区(多选)</h3>
<div id="demo2"></div>

<div>
    <code>
        lastIsMultiple:true,
    </code>
</div>

<p class="demo2">
    <span class="button">点击清除</span>
    <span class="edit">点击回写</span>
    <span class="console">console</span>
</p>

<h3>普通省市区(自定义提示)</h3>
<div id="demo3"></div>

<div>
    <code>
        placeholderText:'你试试换个提示'
    </code>
</div>

<p class="demo3"><span class="button">点击获取值</span>：<span class="txt"></span></p>

<h3>省市区(弹窗居中显示)</h3>
<div id="demo4"></div>

<div>
    <code>
        layPosition:'layer',
    </code>
</div>
<p class="demo4"><span class="button">点击获取值</span>：<span class="txt"></span></p>


<h3>省市-自定义区接口</h3>
<div id="demo10"></div>

<div>
    <code>
        pickerClass:'pickerAreaPost',
        loadAjax:test
    </code>
</div>
<p class="demo10"><span class="button">点击获取值</span>：<span class="txt"></span></p>

</body>



<script src="js/mqPicker.js"></script>

<script>
    //高德相关
    function loadAmapApi(amapKey,amapVersion) {
        if(!amapKey) amapKey='';
        if(!amapVersion) amapVersion='1.4.14';
        // var amapApiUrl = 'https://webapi.amap.com/maps?v='+amapVersion+'&key='+amapKey+'&callback=apiLoad',//加载JS api
        var amapApiUrl = 'https://webapi.amap.com/maps?v='+amapVersion+'&key='+amapKey+'&plugin=AMap.DistrictSearch'+'&callback=apiLoad',//加载JS api
            jsapi = document.createElement('script');

        jsapi.charset = 'utf-8';
        jsapi.src = amapApiUrl;
        document.head.appendChild(jsapi);
    }

    loadAmapApi('7a83c014e37800a4ecb7193e306b67ba');
    var demoOne;
    window.apiLoad=function (){//异步加载
        window.districtSearch = new AMap.DistrictSearch({
            subdistrict: 1,//  显示下级行政区级数，1表示返回下一级行政区
        });

        demoOne=new MqPicker({
            domMaster:'#demo1',
            layPosition:'float',
            lastIsMultiple:false,
            pickerErrors:searchError
        });

        var demoTwo=new MqPicker({
            domMaster:'#demo2',
            layPosition:'float',
            lastIsMultiple:true,
        });

        var demoThree=new MqPicker({
            domMaster:'#demo3',
            layPosition:'float',
            placeholderText:'你试试换个提示',
            lastIsMultiple:false,
        });

        var demoFour=new MqPicker({
            domMaster:'#demo4',
            layPosition:'layer',
            lastIsMultiple:true,
            output:'name'
        });

        var demoTen=new MqPicker({
            domMaster:'#demo10',
            pickerLevel:{
                name:['省','市','自定义'],
            },
            layPosition:'layer',
            lastIsMultiple:true,
            pickerClass:'pickerAreaPost',
            loadAjax:test
        });

        var url="https://www.easy-mock.com/mock/59a9210de0dc66334198c0cd/data";
        function test(data){
            return $.ajax({
                url: url,
                data:data,
            })
        }


        function searchError(){
            alert("错误提示方法")
        }

        $(".demo10 .button").on("click",function () {
            $(".demo10 .txt").html(demoTen.outValue)
        });

        $(".demo1 .edit").on("click",function () {
            demoOne.pickerRewrite(["420000","420500","420528"])
            // demoOne.pickerRewrite(["420000","429000","429004"])//测试回写
        });

        $(".demo1 .button").on("click",function () {
            demoOne.pickerReset()
        });

        $(".demo1 .console").on("click",function () {
            console.log(demoOne.tabData)
        });

        $(".demo2 .button").on("click",function () {
            demoTwo.pickerReset()
        });

        $(".demo2 .console").on("click",function () {
            console.log(demoTwo.tabData)
        });

        $(".demo2 .edit").on("click",function () {
            demoTwo.pickerRewrite(["420000","420500",["420504","420583"]])//测试回写
        });

        $(".demo3 .button").on("click",function () {
            $(".demo3 .txt").html(demoThree.outValue)
        });

        $(".demo4 .button").on("click",function () {
            $(".demo4 .txt").html(demoFour.outName)
        });



    };
</script>
</html>